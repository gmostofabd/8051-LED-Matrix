

DATA_PIN 	EQU 	P3.5
LATCH_PIN 	EQU 	P3.6
CLCOK_PIN 	EQU 	P3.4

ORG 0100H

MAIN:	
	MOV	A, #01H
	MOV	P2, A
	CALL DELAY
	MOV	A, #00H
	MOV	P2, A
	CALL DELAY




	MOV	A, #00H
	CALL	send_data
	CALL DELAY

	MOV	A, #01H
	CALL	send_data
	CALL DELAY
	MOV	A, #02H
	CALL	send_data
	CALL DELAY
	MOV	A, #04H
	CALL	send_data
	CALL DELAY
	MOV	A, #08H
	CALL	send_data
	CALL DELAY
	MOV	A, #10H
	CALL	send_data
	CALL DELAY
	MOV	A, #20H
	CALL	send_data
	CALL DELAY
	MOV	A, #40H
	CALL	send_data
	CALL DELAY

	MOV	A, #80H
	CALL	send_data
	CALL DELAY

	JMP MAIN


SEND_DATA:
	
	MOV	R5, #8
HERE:
	RRC 	A
	MOV	DATA_PIN, C
	CALL	CLOCK_SIGNAL
	DJNZ	R5, HERE
	CLR	LATCH_PIN
	CALL DELAY
	SETB LATCH_PIN
	RET



CLOCK_SIGNAL:
   SETB	CLCOK_PIN
    CALL DELAY
   CLR CLCOK_PIN
    CALL DELAY
    RET


LATCH_ENABLE:
   
    SETB LATCH_PIN
    CALL DELAY
    CLR	LATCH_PIN
    RET




;SUBROUTINE GENERATES SOME DELAY
DELAY:MOV R1, 5
LOOP1:MOV R0, #0FFH
DJNZ R0, $
MOV R0, #0FFH
DJNZ R0, $
MOV R0, #0FFH
DJNZ R0, $
MOV R0, #0FFH
DJNZ R0, $
DJNZ R1, LOOP1
RET
END